# File System Management (Sections 12.1–12.9)

## What is a File System?

* A **file system** is the way an OS organizes, names, stores, and retrieves data on storage devices.
* Files are stored as **streams of bytes** but grouped into meaningful formats (text, program, image, etc.).
* Disks are divided into **sectors** (e.g., 4096 bytes).

  * Files occupy one or more sectors.
  * On average, \~0.5 sector is wasted per file due to mismatch in file size vs. sector size → trade-off between **storage efficiency** and **management overhead**.

### Key Responsibilities

* Tracks which sectors belong to which file.
* Maintains unique file identities.
* Provides **standardization** so disks can be read across systems (e.g., FAT, NTFS, EXT4).
* Offers **fault tolerance** (e.g., avoiding bad sectors).
* Provides **efficiency** in both storage and retrieval.
* Supports **deletion & reuse** of space.

---

## Example: FAT (File Allocation Table)

* Widely used, simple file system.
* Keeps a **lookup table** mapping sectors → files.
* Early FAT limited to small numbers of sectors; modern versions handle billions.
* Sector size choice affects efficiency:

  * Small sectors = less wasted space but more entries to manage.
  * Large sectors = easier management but more internal fragmentation.

---

## Boot Sector

* A reserved area on disk containing **startup code**.
* Required for a disk to be **bootable**.
* Formatting writes the file system structure (incl. boot sector).
* Non-bootable disks can store programs/files but cannot start the OS.

---

## Volumes and Partitions

* **Partitioning**: splitting a physical drive into logical sections, each with its own file system.

  * Example: dual-boot with Windows + Linux.
* **Spanned volume**: combines multiple physical drives into one logical volume.

  * e.g., 2 × 4TB drives appearing as a single 8TB drive.
* OS hides complexity: to users/programs, all partitions/volumes look like regular drives.

---

## Root Directory

* The **entry point** of a file system.
* Holds all top-level files and folders.
* Without structure, it would become chaotic (10,000 files dumped together).

---

## File-System Hierarchy

* Uses **directories (folders)** to organize files into a **tree-like structure**.
* Example structure:

  ```
  Root
  ├── OS
  ├── CUST
  ├── EMP
  └── STOCK
  ```
* Supports **sub-directories** (nested folders).
* Access can be restricted (e.g., only admins can open `OS`).

---

## Special File Cases

* **Symbolic Links**:

  * File/folder appears in one location but actually points elsewhere.
  * Useful for convenience, versioning, or rearranging data transparently.
* **Virtual Files**:

  * Files on a remote machine appear local through network integration.
  * e.g., network drives in a company warehouse accessible across terminals.

---

## File Attributes

* Metadata that controls **visibility, usage, and permissions**.
* Common attributes:

  * **Hidden**: not visible in normal directory listings.
  * **Executable**: can be run as a program.
  * **System**: OS-critical file, usually protected.
  * **Read-only**: cannot be edited or deleted.
  * **Archive**: used for backup policies.
* Linux/Unix systems expand this with **user/group/other permissions** (`rwx`).

---

# Why This Matters

* File systems ensure **data consistency, efficiency, and security**.
* Understanding structures (root, hierarchy, attributes) explains how the OS protects critical files (e.g., hidden/system files).
* Standards ensure **cross-platform compatibility** (FAT for USB drives, NTFS for Windows, EXT for Linux, APFS for macOS).

---

## Task Questions

**Q1: How does understanding the structure and function of a file system help you appreciate modern data storage?**

* Shows how chaos is prevented → organized hierarchies.
* Explains how disks manage limited sectors efficiently.
* Highlights resilience strategies (bad sectors, metadata).
* Reveals trade-offs (sector size vs. wasted space, FAT vs. NTFS vs. EXT).

**Q2: Why are hidden/system files treated differently?**

* Hidden files prevent accidental deletion or clutter.
* System files protect OS integrity.
* File attributes enforce access control → preventing users/programs from breaking the system.